<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yy-oops.github.io","root":"/","scheme":"Mist","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="努力充实自己">
<meta property="og:type" content="website">
<meta property="og:title" content="YY&#39;s blog">
<meta property="og:url" content="http://yy-oops.github.io/index.html">
<meta property="og:site_name" content="YY&#39;s blog">
<meta property="og:description" content="努力充实自己">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="YY">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yy-oops.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>YY's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YY's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">To be a better man</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yy-oops.github.io/2020/03/27/PAMR------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YY">
      <meta itemprop="description" content="努力充实自己">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YY's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/27/PAMR------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">PAMR------论文阅读笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-27 17:30:00 / 修改时间：18:14:30" itemprop="dateCreated datePublished" datetime="2020-03-27T17:30:00+08:00">2020-03-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="PAMR———论文阅读笔记"><a href="#PAMR———论文阅读笔记" class="headerlink" title="PAMR———论文阅读笔记"></a>PAMR———论文阅读笔记</h4><h4 id="PAMR：Passive-aggressive-mean-reversion-strategy-for-portfolio-selection"><a href="#PAMR：Passive-aggressive-mean-reversion-strategy-for-portfolio-selection" class="headerlink" title="PAMR：Passive aggressive mean reversion strategy for portfolio selection"></a>PAMR：Passive aggressive mean reversion strategy for portfolio selection</h4><h5 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h5><p>受金融危机的启发，金融危机发生时所有股票同步下跌或者某些股票大幅下跌。在这种情况下利用均值回归思想进行再平衡显然是不合适的，因为它把太多资金放在”mine” stocks上（这里我也不太懂“mine” stocks是什么，文章举例为Bear Stearns，查了相关资料可能说的是表现很差甚至会破产的股票吧），所以为了避免这种潜在风险，最好的选择就是维持原来的投资组合。</p>
<p>那么PAMR就是想根据市场情况在“aggressive”和“passive”回归之间交替使用策略。如果使用激进的均值回归方法，那么它就会把大量财富放在这种价格大幅下跌的“mine” stocks上，那么如果使用被动的均值回归策略就能避免这种高风险。</p>
<blockquote>
<p>下文频繁用到表现好的股票和表现差的股票，让我来解释一下：</p>
<p>表现好的股票：价格上涨，投钱进去就能赚钱</p>
<p>表现差的股票：价格下跌，投钱进去就会亏本</p>
</blockquote>
<h5 id="基本思想"><a href="#基本思想" class="headerlink" title="基本思想"></a>基本思想</h5><p>一方面我们假设表现好的股票在下一个交易日表现差，于是我们就会调整资金，卖掉表现好的股票，买入表现差的股票。但是另一方面如果某一股票连续下跌，或者下跌的太厉害，那么我们就主动的停止这种再平衡以此避免某些“mine” stocks与其带来的高风险。</p>
<p>如果投资组合的日回报低于我们预定义的阈值，我们就试着保持原来的投资组合；如果投资组合日回报高于我们预定义的阈值，那么就积极的再平衡投资组合确保期望投资组合日回报低于阈值，因为我们相信股票的价比在下一个交易日会恢复。</p>
<p>上面的说法显然有点违反我们的一般认知：如果日回报超过阈值，说明赚的钱比我们所希望的要多，那么我们应该尽量保持原来的投资组合继续赚钱；如果日回报低于阈值，说明赚的钱没有达到我们的期望，那么肯定投资组合有问题，我们应该积极的改变它才对啊。为什么该文的方法和我们的直观认知不一样呢？</p>
<p>为了理解上面的说法，搞清楚该文做法的合理性，我们先来看下PA（Passive Aggressive）的思想</p>
<blockquote>
<p>最初PA在线学习是用于分类任务的，简单来说，PA的基本思想就是，如果损失为0（代表分类正确），那么我们就被动地保持之前的解决方案（之前的权重参数之类的），如果损失不为0（分类不正确），那么我们就积极地更新解决方案（更新权重参数）。</p>
</blockquote>
<p>那么现在我们来想，如果投资组合日回报低于阈值，那说明什么？说明我们进行投资时，大部分资金投在了表现差的股票上，少部分投在了表现好的股票上，所以导致我们的投资组合日回报达不到我们的预期，但是为什么我们不改变投资组合呢？而是保持原来的投资组合呢？实际上我们不要忘记均值回归假设：表现好的股票在下一交易日表现差，表现差的股票在下一交易日表现好。那么在下一交易日时，我们可以预见如果不改变投资组合，那么下一交易日大部分的资金就投在了表现好的股票上（该股票上一交易日表现差），少部分的资金投在了表现差的股票上（该股票上一交易日表现好），于是下一交易日我们就是赚钱的。如果我们继续不改变投资组合的话，那么下下个交易日我们肯定又要亏钱了，所以我们这时候得改变我们的投资组合使其在下个交易日的投资组合回报低于阈值。所以尽管我们看起来像是构建一个投资组合使得投资组合的回报低于阈值，实际上我们是利用了均值回归特性，最大化下一交易日的投资组合回报。如果对于那种价格连续下降的资产，我们的策略就是尽可能的保持原来的投资组合，避免激进的进行再平衡，这只会让我们亏得更多。</p>
<p>所以结合PA思想和我们的更新原则，我们需要定义：如果投资组合日回报低于阈值我们需要定义这种情况损失为0，不需要更新投资组合；如果投资组合日回报高于我们预定义的阈值，那么这种情况定义损失不为0，需要更新投资组合。</p>
<h5 id="PAMR"><a href="#PAMR" class="headerlink" title="PAMR"></a>PAMR</h5><p>对于给定一个投资组合向量$\mathbf b$，我们定义损失函数如下：</p>
<p><img src="image-20200325172132806.png" alt="image-20200325172132806"></p>
<p>其中$\epsilon\ge 0$是一个敏感性参数，其控制着均值回归阈值。因为投资组合日回报率通常在1左右，所以我们依照经验选择$\epsilon \le 1$，这样的话我们就可以买入表现差的股票。</p>
<p>接下来是PAMR的三个变体：</p>
<h5 id="Optimization-Problem-1-PAMR"><a href="#Optimization-Problem-1-PAMR" class="headerlink" title="Optimization Problem 1(PAMR)"></a>Optimization Problem 1(PAMR)</h5><p><img src="/images/image-20200326094317106.png" alt="image-20200326094317106"></p>
<p>上式的意思就是在满足约束即损失为0（日回报率低于我们的期望）时，我们积极的寻找一种新的投资组合，使该新的投资组合与原先最后的投资组合差别尽可能小。</p>
<p>所以说，上式一方面被动的（passively）保留住最后一个投资组合，另一方面当损失不为0时，那么该方法就强迫损失满足约束来积极地（aggressively）更新解决方案。</p>
<p>缺点：可能对噪声敏感</p>
<h5 id="Proposition-1"><a href="#Proposition-1" class="headerlink" title="Proposition 1"></a>Proposition 1</h5><p>不考虑非负限制的结果是</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326140624151.png" alt="image-20200326140624151"></p>
<p>其中</p>
<script type="math/tex; mode=display">
\bar {x}_t=\frac{\mathbf x_t\cdot \mathbf 1}{m}\\\tau_t=\text{max}\left\{0,\frac{\mathbf b_t\cdot\mathbf x_t - \epsilon}{\|\mathbf x_t-\bar x_t\mathbf 1\|^2}\right\}</script><h5 id="Proof"><a href="#Proof" class="headerlink" title="Proof"></a>Proof</h5><p>为了方便起见，我们用$\ell^t_\epsilon$代表$\ell_\epsilon(\mathbf b;\mathbf x_t)$。</p>
<p>如果$\ell_\epsilon^t=0$，那么就有$\mathbf b\cdot\mathbf x_t\le\epsilon$，所以$\tau_t = 0$，所以$\mathbf b = \mathbf b_t$，所以显然是该解是满足我们要求的，如果损失为0，那么投资组合就不改变。</p>
<p>如果$\ell_\epsilon^t\not=0$，那么带等式约束的优化问题可以用拉格朗日乘子法来解决，</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326142432580.png" alt="image-20200326142432580"></p>
<p>其中$\tau$是和损失函数有关的拉格朗日乘子，$\lambda$是和单纯型约束有关的拉格朗日乘子。</p>
<p>然后按照一般方法求解就行了，这个高数里面也学过，对未知参数求偏导：</p>
<p>先用拉格朗日函数对未知参数$\mathbf b$求偏导并令其为0得到，</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326142830391.png" alt="image-20200326142830391"></p>
<p>然后两边同时乘以$\mathbf 1^{\top}$得到</p>
<script type="math/tex; mode=display">
\lambda = -\frac{\tau}{m}\mathbf x_t\cdot \mathbf 1</script><p>又因为$\bar x_t= \frac{\mathbf x_t\cdot\mathbf 1}{m}$，所以</p>
<script type="math/tex; mode=display">
\lambda = -\tau\bar x_t</script><p>将该式带回到上面求偏导的式子中得到</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326143631056.png" alt="image-20200326143631056"></p>
<p>未知数$\lambda$也知道了（用$\tau$表示），未知数$\mathbf b$也知道了（用$\tau$表示），那么带入到原本的拉格朗日函数中就只剩一个未知数$\tau$了，</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326144109509.png" alt="image-20200326144109509"></p>
<p>注意上式在推导时使用了下面这个式子</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326144448113.png" alt="image-20200326144448113"></p>
<p>然后对未知参数$\tau$求偏导并令其为0就可以了</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326144544586.png" alt="image-20200326144544586"></p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326144606420.png" alt="image-20200326144606420"></p>
<p>因为$\tau\ge0$所以需要投影到$[0,\infty)$</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326144808458.png" alt="image-20200326144808458"></p>
<p>注意到如果$|\mathbf x_t-\bar x_t\mathbf 1|^2=0$，那么我们就让$\tau = 0$。</p>
<h5 id="Optimization-Problem-2（PAMR-1）"><a href="#Optimization-Problem-2（PAMR-1）" class="headerlink" title="Optimization Problem 2（PAMR-1）"></a>Optimization Problem 2（PAMR-1）</h5><p>该变体的提出主要是为了避免上述的噪声问题，主要思想是类似于软边缘支持向量机引入一个非负松弛变量。</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326095729038.png" alt="image-20200326095729038"></p>
<p>可以看到该变体在原来的目标函数基础上增加了一个和$\xi$成比例的项，其中$C$是一个正数，用来控制松弛变量项对目标函数的影响。</p>
<h5 id="Proposition-2"><a href="#Proposition-2" class="headerlink" title="Proposition 2"></a>Proposition 2</h5><p>不考虑非负限制的结果是</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326145255682.png" alt="image-20200326145255682"></p>
<p>其中</p>
<script type="math/tex; mode=display">
\bar {x}_t=\frac{\mathbf x_t\cdot \mathbf 1}{m}\\\tau_t=\text{max}\left\{0,\text{min}\left\{C,\frac{\mathbf b_t\cdot\mathbf x_t - \epsilon}{\|\mathbf x_t-\bar x_t\mathbf 1\|^2}\right\}\right\}</script><h5 id="Proof-1"><a href="#Proof-1" class="headerlink" title="Proof"></a>Proof</h5><p>其实推导PAMR-1的过程和推导PAMR的过程几乎是一样的，为了方便起见，只推导其中的关键部分</p>
<p>当$\ell_\epsilon^t\not=0$时，拉格朗日函数如下</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326150726382.png" alt="image-20200326150726382"></p>
<p>用拉格朗日函数对未知数$\mathbf b$求偏导并令其为0</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326150821104.png" alt="image-20200326150821104"></p>
<p>然后两边同时乘以$\mathbf 1^{\top}$得到</p>
<script type="math/tex; mode=display">
\lambda = -\frac{\tau}{m}\mathbf x_t\cdot \mathbf 1=-\tau\bar x_t</script><p>那么近似解为</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326143631056.png" alt="image-20200326143631056"></p>
<p>注意到拉格朗日函数中这一项$\xi(C-\tau-\mu)$，因为$\xi\ge0$，所以当$C-\tau-\mu=0$时，该项具有最小值为0。如果$C-\tau-\mu\not=0$，那么最小值可能就是负无穷了。</p>
<p>因为我们需要最大化对偶，所以我们可以排除后一种情况，并对对偶变量施加如下约束$C-\tau-\mu=0$。KKT条件定义了$\mu$是非负值，所以有$\tau\le C$，所以我们最后把$\tau$投影到区间$[0,C]$</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326152505473.png" alt="image-20200326152505473"></p>
<h5 id="Optimization-Problem-3（PAMR-2）"><a href="#Optimization-Problem-3（PAMR-2）" class="headerlink" title="Optimization Problem 3（PAMR-2）"></a>Optimization Problem 3（PAMR-2）</h5><p>该变体也是为了解决噪声问题的另一种解决方法，但是这一次不是使用松弛变量的线性项，而是引入一个和$\xi$相关的平方项。</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326100709196.png" alt="image-20200326100709196"></p>
<p>那么上式我们就不需要像第一种变体约束$\xi\ge0$，因为$\xi^2$始终是非负的。</p>
<h5 id="Proposition-3"><a href="#Proposition-3" class="headerlink" title="Proposition 3"></a>Proposition 3</h5><p>不考虑非负限制的结果是</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326145255682.png" alt="image-20200326145255682"></p>
<p>其中</p>
<script type="math/tex; mode=display">
\bar {x}_t=\frac{\mathbf x_t\cdot \mathbf 1}{m}\\\tau_t=\text{max}\left\{0,\frac{\mathbf b_t\cdot\mathbf x_t - \epsilon}{\|\mathbf x_t-\bar x_t\mathbf 1\|^2+\frac{1}{2C}}\right\}</script><h5 id="Proof-2"><a href="#Proof-2" class="headerlink" title="Proof"></a>Proof</h5><p>其实推导PMAR-2的过程和推导PAMR-1和PAMR的过程几乎是一样的，为了方便起见，只推导其中的关键部分</p>
<p>当$\ell_\epsilon^t\not=0$时，拉格朗日函数如下</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153023845.png" alt="image-20200326153023845"></p>
<p>用拉格朗日函数对未知数$\mathbf b$求偏导并令其为0</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153059218.png" alt="image-20200326153059218"></p>
<p>然后两边同时乘以$\mathbf 1^{\top}$得到</p>
<script type="math/tex; mode=display">
\lambda = -\frac{\tau}{m}\mathbf x_t\cdot \mathbf 1=-\tau\bar x_t</script><p>那么近似解为</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326143631056.png" alt="image-20200326143631056"></p>
<p>对未知数$\xi$求偏导得到</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153240021.png" alt="image-20200326153240021"></p>
<p>未知数$\xi$也知道了（用$\tau$表示），未知数$\mathbf b$也知道了（用$\tau$表示），那么带入到原本的拉格朗日函数中就只剩一个未知数$\tau$了</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153409415.png" alt="image-20200326153409415"></p>
<p>然后对未知数$\tau$求偏导并令其为0</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153531495.png" alt="image-20200326153531495"></p>
<p>最后将$\tau$投影到$[0,\infty)$</p>
<p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326153723363.png" alt="image-20200326153723363"></p>
<h5 id="PAMR策略"><a href="#PAMR策略" class="headerlink" title="PAMR策略"></a>PAMR策略</h5><p><img src="/../../../../../../../../Blog/blog/source/images/image-20200326102301267.png" alt="image-20200326102301267"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yy-oops.github.io/2020/03/17/RPRT------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YY">
      <meta itemprop="description" content="努力充实自己">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YY's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/17/RPRT------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">RPRT------论文阅读笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-17 18:49:35 / 修改时间：13:47:30" itemprop="dateCreated datePublished" datetime="2020-03-17T18:49:35+08:00">2020-03-17</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="RPRT———论文阅读笔记"><a href="#RPRT———论文阅读笔记" class="headerlink" title="RPRT———论文阅读笔记"></a>RPRT———论文阅读笔记</h4><h4 id="Reweighted-Price-Relative-Tracking-System-for-Automatic-Portfolio-Optimization"><a href="#Reweighted-Price-Relative-Tracking-System-for-Automatic-Portfolio-Optimization" class="headerlink" title="Reweighted Price Relative Tracking System for Automatic Portfolio Optimization"></a>Reweighted Price Relative Tracking System for Automatic Portfolio Optimization</h4><p>本文出发点：1. 不像OLMAR预测价格时使用平均值，这样相当于每个资产的权重都是一样的，但是不同的资产对预测价格应该有不同的影响，所以在预测价格阶段自动的为资产加权并且自动更新是有必要的；2. 在投资组合优化阶段，如果资产有表现好的潜力（获得财富高）那就设定与其成比例的优化方向 。</p>
<hr>
<h4 id="本文研究内容"><a href="#本文研究内容" class="headerlink" title="本文研究内容"></a>本文研究内容</h4><p>该文主要是受OLMAR的启发，因为在不同资产上预测价格时采用了统一的权重，所以它不太能有效的适应变动的市场，在实际场景下表现不太好。为了进一步用自适应的方式利用均值回归原则，于是提出了RPRT系统。</p>
<h5 id="价比预测"><a href="#价比预测" class="headerlink" title="价比预测"></a>价比预测</h5><p>为了不使用统一的权重，RPR(Reweighted Price Relative)方法在价比预测时为不同的资产分配不同的权重。</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309142628139.png" alt="image-20200309142628139"></p>
<p>其中</p>
<ol>
<li>$\hat {\boldsymbol {\varphi}}_{t+1}$代表新的预测价比；</li>
<li>$\mathbf x_t$代表实际价比；</li>
<li>$\boldsymbol \gamma_{t+1}$代表权重向量，注意它不是固定的，它也随着时间更新。</li>
</ol>
<hr>
<p>可以看到上面这个式子实际上跟OLMAR中的EMA预测形式是一样的，不如我来解释一下：</p>
<p>为了考虑整个价比，而不是一个窗口内的，所以对所有的历史价比进行指数加权，使越久远的价格信息占比越少，提出EMA价格预测，其中$\alpha$是衰减因子：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200314103052329.png" alt="image-20200314103052329"></p>
<p>那么EMA预测价比为：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200314103145896.png" alt="image-20200314103145896"></p>
<p>那这个形式实际上就和我们上面提出的价格预测形式是一样了，只不过EMA中$\alpha$是不变的，而RPR方法中$\lambda$是会变的，在不同的价格预测周期会更新为不同的值。</p>
<hr>
<p>至于如何确定$\boldsymbol \gamma_{t+1}$，因为我们既要考虑所有的历史信息又要考虑当前的市场环境（因为不同的资产有不同表现，所以不同资产根据其表现权重应该不同，而每个资产的表现也不是一成不变的，会随着金融环境的改变而改变，所以各个资产的权重也要随着时间更新），所以把预测价比$\hat {\boldsymbol {\varphi}}_{t}$和实际价比组合$\mathbf x_t$在一起可能是个不错的方法（<strong>因为预测价比$\hat {\boldsymbol {\varphi}}_{t}$代表着历史价格信息，实际价比$\mathbf x_t$代表着当前市场环境信息</strong>）。</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309145620363.png" alt="image-20200309145620363"></p>
<p>其中</p>
<ol>
<li>$\vartheta&gt;0$是一个混合参数；</li>
<li>$0&lt;\boldsymbol \gamma_{t+1}^{(i)}&lt;1$</li>
<li>当$\vartheta$越大，说明实际价比对预测价格影响越大，反之亦然。</li>
</ol>
<hr>
<p>举例解释一下上面的式子：既然$\gamma_{t+1}$是想由历史信息和当前环境共同决定，所以我们很自然会想历史信息$\hat {\boldsymbol {\varphi}}_{t}$占多大比例，当前环境$\mathbf x_t$又要占多大比例。假如一个资产表现很好，那么它的价格增长因子肯定大（相当于$\mathbf x^{(i)}_t$很大），那么$\boldsymbol \gamma_{t+1}^{(i)}$就越接近1，那么最后的预测价比$\hat {\boldsymbol {\varphi}}_{t+1}^{(i)}$也就越接近1。否则的话，$\boldsymbol \gamma_{t+1}^{(i)}$就越接近0，那么$\hat {\boldsymbol {\varphi}}_{t+1}^{(i)}$就越接近$\hat {\boldsymbol {\varphi}}_{t}^{(i)}/\mathbf x^{(i)}_t$，由于分母很小，所以$\hat {\boldsymbol {\varphi}}_{t+1}^{(i)}$就会是一个很大的值。</p>
<hr>
<p>从上面这个例子可以看出，当资产表现好时，反而预测保守；当资产表现差时，预测比较激进。这实际上是符合均值回归原则的思想。</p>
<h5 id="投资组合优化"><a href="#投资组合优化" class="headerlink" title="投资组合优化"></a>投资组合优化</h5><p>基本的策略是在可能表现好的资产上投入更多的资金，在可能表现不好的资产上投入相对较少的资金。如果我们再看看均值回归原则：一个当前价格超过平均线的资产在下一个周期价格可能会下降，一个当前价格低于平均线的资产下个周期价格可能会增长。所以换句话说就是在当前表现好（下一周期可能表现差）的资产上投入较少的资金，在当前表现差（下一周期可能表现好）的资产上投入较多资金。看一个简单的tracking system:</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309153143552.png" alt="image-20200309153143552"></p>
<p>那么投资组合的更新量$\bigtriangleup\mathbf b_{t+1}$被设置为与预测价比$\hat {\boldsymbol {\varphi}}_{t+1}$成比例，因为预测价比暗示了该资产的财富增长潜力，当预测价比较小时，我们尽量在该资产上投入较小的资金，当预测价比较大时，我们加大投入。</p>
<p>那么一般我们的目标是最大化累计财富，所以优化问题如下：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309154840252.png" alt="image-20200309154840252"></p>
<p>其实也就是最大化财富增长因子$\mathbf b^{\top}\hat {\boldsymbol {\varphi}}_{t+1}$。</p>
<p>实际上本文没有使用这种广为使用的财富增长因子，而是提出了一种更加具有一般性的增长因子：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309155208206.png" alt="image-20200309155208206"></p>
<p>其中</p>
<ol>
<li>$\mathbf D_{t+1}$是一个正定对称矩阵，用来调整不同资产之间的相对影响，以此提高广义增长因子的自适应性，它在每个周期根据市场环境自动的更新；</li>
<li>$\bar {\varphi}_{t+1}$是所有资产预测价比的平均值；</li>
<li>$(\hat {\boldsymbol {\varphi}}_{t+1}-\bar {\varphi}_{t+1}\mathbf 1)$是各个资产预测价比对于平均值的偏差，可以看作一个标准化预测价比，可以想象这个向量中有些元素是正的，有些元素是负的，这代表这些资产是不是有好的增长能力；</li>
<li>$(\mathbf b - \hat{\mathbf b}_t)$和上面的解释差不多，看作一个标准化的预测投资组合。</li>
</ol>
<p>那么对于这个新提出的广义增长因子，我们代替原来的增长因子后，目标优化函数就变成了（后面的约束不知道是怎么变换来的）：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309161218255.png" alt="image-20200309161218255"></p>
<p>其中</p>
<ol>
<li>$\mathbf D^{-1}_{t+1}$代表$\mathbf D_{t+1}$的逆；</li>
<li>$(y)^+=\text{max}\{0,y\}$；</li>
<li>$\epsilon$可以看作是预期盈利水平，如果实际的盈利水平超过了我们的预期$\mathbf b^{\top}\hat {\boldsymbol {\varphi}}_{t+1}&gt;\epsilon$，那么$\mathbf b$和$\hat{\mathbf b}_{t}$的马氏距离就要小于等于0，这意味着投资组合就不改变；否则的话，如果实际盈利达不到预期，那么之间的这个差距就能控制投资组合$\mathbf b$的可行解集，换句话说，$\mathbf b$和$\hat{\mathbf b}_{t}$的马氏距离就要小于等于一个数，而这个数的大小和期望与实际情况的差距大小有关。我们想象一个高维空间中的椭球体，$\hat{\mathbf b}_{t}$是球心，那么上面约束中小于等于号右边的分式就相当于球的半径，那么$\mathbf b$就可以是这个球表面和内部的任意一点，半径变大变小影响着$\mathbf b$的可行解集的大小。</li>
</ol>
<p>对于上面的约束的理解还补充一点知识：</p>
<blockquote>
<p>马哈拉诺比斯距离又称马氏距离，是对欧式距离的一种修正，能够处理欧式距离中各个特征维度不同且自相关的问题：</p>
<script type="math/tex; mode=display">
D_M(x)=\sqrt{(x-\mu)^T\Sigma^{-1}(x-\mu)}</script><p>如果协方差矩阵$\Sigma$是单位矩阵，那么马氏距离就可以简化为欧式距离</p>
</blockquote>
<p>至于$\mathbf D_{t+1}$，我们希望表现好的资产能够在预测未来价格上起更大的作用，所以$\mathbf D_{t+1}$中相应的元素值应该设得更大，得益于对OLMAR论文中的启发：表现好的资产的预测价格大，表现不好的资产的预测价格小。</p>
<blockquote>
<p>OLMAR论文中提出了两种预测价格的方式：1. 简单移动平均（Simple Moving Average SMA）2. 指数移动平均（Exponential Moving Average EMA）</p>
<p>SMA的思想是：取一个窗口，窗口大小为w，预测价格就是简单的窗口内的资产价格的算术平均值：</p>
<script type="math/tex; mode=display">
SMA_t(w)=\frac{1}{w}\sum^t_{i = t-w+1}\mathbf p_i</script><p>EMA的思想是：利用所有的历史价格信息，没有取窗口。既然利用所有的历史价格信息，那么很直观的是时间越久远的价格信息对预测未来价格影响应该越小，相应的就是权重越小：</p>
<script type="math/tex; mode=display">
\begin{aligned}EMA_t(\alpha)&=\alpha\mathbf p_t +(1-\alpha)EMA_{t-1}(\alpha)\\&=\alpha\mathbf p_t+(1-\alpha)\alpha\mathbf p_{t-1}+(1-\alpha)^2\alpha\mathbf p_{t-2}+\dots+(1-\alpha)^{t-1}\mathbf p_{1}\end{aligned}</script></blockquote>
<p>利用SMA的思想，所以将$\mathbf D_{t+1}$设置为</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310121322546.png" alt="image-20200310121322546"></p>
<p>其中</p>
<script type="math/tex; mode=display">
\hat{\mathbf x}_{SMA,t+1}=\frac{SMA_t{(w)}}{\mathbf p_t}=\frac{\sum^{w-1}_{k=0}\mathbf p_{t-k}}{w\mathbf p_t}=\frac{1}{w}\left(\mathbf 1 +\frac{\mathbf 1}{\mathbf x_t}+\dots+\frac{\mathbf 1}{\bigotimes^{w-2}_{k=0}\mathbf x_{t-k}}\right)</script><p>显然这个设置是符合我们想法的，表现好的资产在最近的窗口内价格的平均值肯定高，所以把他作为$\mathbf D_{t+1}$的对角元素那么在预测未来价格的时候影响就大。</p>
<h5 id="优化问题的求解算法"><a href="#优化问题的求解算法" class="headerlink" title="优化问题的求解算法"></a>优化问题的求解算法</h5><p>目标函数：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200309161218255.png" alt="image-20200309161218255"></p>
<p>主要是使用梯度投影原理来进行高效的计算。梯度投影原理主要包括一个梯度上升或者梯度下降步骤和一个投影步骤组成。所以一般的做法就是先不管单纯形域的限制，等我们求出解后再进行投影就可以了。</p>
<p>那么先对未知参数$\mathbf b$求梯度</p>
<script type="math/tex; mode=display">
\frac{\partial \hat{\mathbf b}_{t+1}}{\partial\mathbf b}=\mathbf D_{t+1}(\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1)</script><p>梯度上升步：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310124646916.png" alt="image-20200310124646916"></p>
<p>其中</p>
<ol>
<li>$(\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1)$代表着不同资产的增长能力；</li>
<li>$\mathbf D_{t+1}$调整不同资产的优化影响；</li>
<li>$\lambda_{t+1}$代表着步长。</li>
</ol>
<p>把这个结果代入约束中</p>
<script type="math/tex; mode=display">
\left(\lambda_{t+1}\mathbf D_{t+1}(\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1)\right)^{\top}(\mathbf D^{-1}_{t+1})^2\left(\lambda_{t+1}\mathbf D_{t+1}(\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1)\right)\le\frac{\left[(\epsilon-\mathbf b^{\top}\hat {\boldsymbol {\varphi}}_{t+1})^+\right]^2}{\|\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1\|^2}</script><p>得到</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310131111406.png" alt="image-20200310131111406"></p>
<p>如果$|\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1|^2=0$那么我们就不更新投资组合，使$\hat\lambda_{t+1}=0$。</p>
<p>如果$|\hat{\boldsymbol\varphi}_{t+1}-\bar\varphi_{t+1}\mathbf 1|^2\not=0$那么我们就最大化投资组合更新步长，使</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310131734129.png" alt="image-20200310131734129"></p>
<p>最后把投资组合$\mathbf b_{t+1}$投影到单纯形域：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310131954027.png" alt="image-20200310131954027"></p>
<h5 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h5><p>主要评价指标：</p>
<ol>
<li><p>CW(cumulative wealth)评价投资表现的核心指标</p>
</li>
<li><p>MER(mean excess return)测量系统比市场平均水平好多少</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310161254607.png" alt="image-20200310161254607"></p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310161308353.png" alt="image-20200310161308353"></p>
<p>其中$r_t$代表第t周期的日回报，$r_{s,t}$是系统的日回报，$r_{m,t}$是市场基准的日回报。</p>
</li>
<li><p>α Factor投资者希望知道排除市场风险的影响后系统能获得多少固有的超额收益。一个投资组合的期望回报分为两部分：一是市场回报乘上投资组合的相对波动性，二是投资组合的固有或者说内在超额收益，第二部分在金融业内称为α因子</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310171918502.png" alt="image-20200310171918502"></p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310171939859.png" alt="image-20200310171939859"></p>
<p>其中$E(\cdot)$代表数学期望，$\hat c(\cdot,\cdot)$代表样本协方差，$\hat \sigma(\cdot)$代表n个周期的STD估计。</p>
</li>
<li><p>APY(annual percentage yield)系统累计财富增长的速度</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310172744574.png" alt="image-20200310172744574"></p>
<p>其中y是与n个投资期相对应的年数。</p>
</li>
<li><p>MDD(maximum drawdown)评估下行风险</p>
<blockquote>
<p>下行风险：股价下行风险是指未来股价走势有可能低于分析师或投资者预期的目标价位的风险。</p>
</blockquote>
<p>投资者需要考虑他们可能面对的最差情况，MDD用来测量在整个投资中一个APO（Automatic Portfolio Optimization）系统从历史峰值到历史谷底的最大损失</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310174638523.png" alt="image-20200310174638523"></p>
</li>
<li><p>SR(Sharpe ratio)用于评价风险调整回报</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310173042815.png" alt="image-20200310173042815"></p>
<p>其中$R_f$代表具有无风险资产的固定年化收益率，分母代表每个收益的年化STD，$APY_s$代表系统的$APY$，因为标准数据集包括的都是风险资产，所以$R_f$置为0。</p>
</li>
<li><p>IR(information ratio)用于评价风险调整回报</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310174040354.png" alt="image-20200310174040354"></p>
<p>代表和market相比较的年化超额收益。</p>
</li>
<li><p>CR(Calmar ratio)用于评价风险调整回报，消除了过高和过低的数据。</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310174847862.png" alt="image-20200310174847862"></p>
</li>
<li><p>TO(turnover)周转率用来测量一个APO系统的稳定性，因为我们每个交易周期都再平衡投资组合，所以TO代表投资组合在整个投资中被买入卖出的平均百分比</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310175513057.png" alt="image-20200310175513057"></p>
<p>其中$\tilde{\mathbf b}_{t-1}^{(i)}$代表第t-1周期末的已调整投资组合，$\tilde {\mathbf b}_0$设为$[0,\dots,0]^{\top}$，$(|\hat{\mathbf b}_t-\tilde{\mathbf b}_{t-1}|/2)$代表一个周期的TO。</p>
</li>
<li><p>Transaction cost包括佣金和税金，我们调节交易费率$\gamma \in (0,1)$来观察系统的累计财富以此来判断一个系统是否能够承受一定的交易费。那么考虑了交易费的累计财富为</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200310180352861.png" alt="image-20200310180352861"></p>
<p>其中$(\gamma/2)\sum^d_{i=1}|\hat{\mathbf b}^{(i)}_t-\tilde{\mathbf b}^{(i)}_{t-1}|$是由于把投资组合$\tilde{\mathbf b}_{t-1}$调整为新的投资组合$\hat{\mathbf b}_t$的比例交易费。</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yy-oops.github.io/2020/03/16/2019RecSys%E6%9C%80%E4%BD%B3%E8%AE%BA%E6%96%87------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YY">
      <meta itemprop="description" content="努力充实自己">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YY's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/2019RecSys%E6%9C%80%E4%BD%B3%E8%AE%BA%E6%96%87------%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">2019RecSys最佳论文------论文阅读笔记</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-16 18:52:21 / 修改时间：15:57:20" itemprop="dateCreated datePublished" datetime="2020-03-16T18:52:21+08:00">2020-03-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="2019RecSys最佳论文———论文阅读笔记"><a href="#2019RecSys最佳论文———论文阅读笔记" class="headerlink" title="2019RecSys最佳论文———论文阅读笔记"></a>2019RecSys最佳论文———论文阅读笔记</h4><h4 id="Are-We-Really-Making-Much-Progress-A-Worrying-Analysis-of-Recent-Neural-Recommendation-Approaches"><a href="#Are-We-Really-Making-Much-Progress-A-Worrying-Analysis-of-Recent-Neural-Recommendation-Approaches" class="headerlink" title="Are We Really Making Much Progress? A Worrying Analysis of Recent Neural Recommendation Approaches"></a>Are We Really Making Much Progress? A Worrying Analysis of Recent Neural Recommendation Approaches</h4><p>论文主要提出现有的研究中存在两个问题：1. 结果的可复现性；2. baseline的选择问题。</p>
<p>论文选择了顶级会议（KDD,SIGIR,WWW,RecSys）中的18篇文章，其中7个只有通过极大的努力才能复现，7个中有6个可以被简单的基于最近邻和基于图的模型超过，剩下的1个虽然能够很好的优于baseline，但是也比不了经过良好调整的非线性排序模型。</p>
<p>是什么导致就算是最近发布在顶会上的神经网络的文章也可以被简单的最近邻模型超越呢？</p>
<p>主要是：</p>
<ol>
<li><strong>选择很弱的baseline</strong>：对于给定的任务和数据集，故意选择很差的baseline，并且有时候这些这些baseline没有进行很好的调参；</li>
<li><strong>创建一些弱方法作为新的baseline</strong>：有些时候，选择的baseline与新提出的算法来自同一个领域，比如提出了一个深度学习的算法只和其他深度学习方法baseline作比较，显然一些传统的非深度学习方法可能要比提出的这个深度学习方法还要好，接着本领域内的其他新方法又拿这个方法作为baseline，一直传递下去，这种行为我们可以想象，该领域中的方法总体就会很弱。</li>
<li><strong>难以比较不同论文结果，也很难复现论文结果</strong>：不同的论文采用不同的数据集，评估方法，表现度量，和数据处理步骤，这让我们很难知道哪个方法在不同的应用场景下是最好的。尤其是不共享源代码和数据集时，这个问题尤为突出。虽然现在公布源代码的趋势在上升，但这还不是很普遍，或者即便公布了源代码，但这些代码通常不完整，比如有的缺少数据预处理，参数调整，或者精确的计算过程等等。</li>
</ol>
<p>本文的做法是：1. 先复现各种论文的结果，看一看各种论文的可复现性；2.使用额外的baseline（基于用户的最近邻方法，基于物品的最近邻方法，基于图的基于用户的最近邻方法，基于图的基于物品的最近邻方法） </p>
<p>本文选择的文章具有以下特征：1. 提出基于深度学习的方法；2. 聚焦于Top-n推荐。一些其他推荐任务，比如团体推荐（group recommendation）和基于会话的推荐（session-based recommendation）都没有考虑在内；3. 使用了分类或者排序指标，比如Precision, Recall, MAP。</p>
<p>那么文章怎么判断一篇文章是否能够复现呢？本文也说明了自己的标准，如果满足以下要求，就认为一篇论文可复现：</p>
<ol>
<li>可以获得源代码的可运行版本，或者源代码只需要小的改动就可以正常运行。</li>
<li>原文中至少有一个数据集可用。更进一步的要求是原始使用的训练-测试分割是公开可获得的或者可以通过论文中的信息重建。</li>
</ol>
<p>显然不满足上述要求我们认为论文不可复现，还有一点就是，如果论文的代码是公开的，但是只包括骨架，而缺少很多部分和很多细节，我们也认为该论文不可复现，如果使用的数据是公司拥有的非公开数据或者数据是自己从网上以某种形式收集的但不公开共享的数据，我们也认为该论文无法复现。</p>
<p>根据这些规则，可以复现的论文如下表：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316132353648.png" alt="image-20200316132353648"></p>
<h5 id="可复现："><a href="#可复现：" class="headerlink" title="可复现："></a>可复现：</h5><ol>
<li><p>KDD</p>
<ul>
<li>Binbin Hu, Chuan Shi, Wayne Xin Zhao, and Philip S Yu. 2018. Leveraging meta-path based context for top-n recommendation with a neural co-attention model. In <em>Proceedings KDD ’18</em>. 1531–1540.</li>
<li>Xiaopeng Li and James She. 2017. Collaborative variational autoencoder for recommender systems. In <em>Proceedings KDD ’17</em>. 305–314.</li>
<li>Hao Wang, Naiyan Wang, and Dit-Yan Yeung. 2015. Collaborative deep learning for recommender systems. In <em>Proceedings KDD ’15</em>. 1235–1244.</li>
</ul>
</li>
<li><p>RecSys</p>
<ul>
<li>Lei Zheng, Chun-Ta Lu, Fei Jiang, Jiawei Zhang, and Philip S. Yu. 2018. Spectral Collaborative Filtering. In <em>Proceedings RecSys ’18</em>. 311–319.</li>
</ul>
</li>
<li><p>SIGIR</p>
<ul>
<li>Travis Ebesu, Bin Shen, and Yi Fang. 2018. Collaborative Memory Network for Recommendation Systems. In <em>Proceedings SIGIR ’18</em>. 515–524.</li>
</ul>
</li>
<li><p>WWW</p>
<ul>
<li>Xiangnan He, Lizi Liao, Hanwang Zhang, Liqiang Nie, Xia Hu, and Tat-Seng Chua. 2017. Neural collaborative fifiltering. In <em>Proceedings WWW ’17</em>. 173–182.</li>
<li>Dawen Liang, Rahul G Krishnan, Matthew D Hoffffman, and Tony Jebara. 2018. Variational Autoencoders for Collaborative Filtering. In <em>Proceedings WWW ’18</em>. 689–698.</li>
</ul>
</li>
</ol>
<h5 id="不可复现："><a href="#不可复现：" class="headerlink" title="不可复现："></a>不可复现：</h5><ol>
<li><p>KDD</p>
<ul>
<li>Yi Tay, Luu Anh Tuan, and Siu Cheung Hui. 2018. Multi-Pointer Co-Attention Networks for Recommendation. In <em>Proceedings SIGKDD ’18</em>. 2309–2318.</li>
</ul>
</li>
<li><p>RecSys</p>
<ul>
<li><p>Zhu Sun, Jie Yang, Jie Zhang, Alessandro Bozzon, Long-Kai Huang, and Chi Xu. 2018. Recurrent Knowledge Graph Embedding for Effffective Recommendation. In <em>Proceedings RecSys ’18</em>. 297–305.</p>
</li>
<li><p>Homanga Bharadhwaj, Homin Park, and Brian Y. Lim. 2018. RecGAN: Recurrent Generative Adversarial Networks for Recommendation Systems. In <em>Proceedings</em> <em>RecSys ’18</em>. 372–376.</p>
</li>
<li>Noveen Sachdeva, Kartik Gupta, and Vikram Pudi. 2018. Attentive Neural Architecture Incorporating Song Features for Music Recommendation. In <em>Proceedings</em> <em>RecSys ’18</em>. 417–421.</li>
<li>Trinh Xuan Tuan and Tu Minh Phuong. 2017. 3D Convolutional Networks for Session-based Recommendation with Content Features. In <em>Proceedings RecSys</em> <em>’17</em>. 138–146.</li>
<li>Donghyun Kim, Chanyoung Park, Jinoh Oh, Sungyoung Lee, and Hwanjo Yu. 2016. Convolutional Matrix Factorization for Document Context-Aware Recommendation. In <em>Proceedings RecSys ’16</em>. 233–240.</li>
<li>Flavian Vasile, Elena Smirnova, and Alexis Conneau. 2016. Meta-Prod2Vec: Product Embeddings Using Side-Information for Recommendation. In <em>Proceedings</em> <em>RecSys ’16</em>. 225–232.</li>
</ul>
</li>
<li><p>SIGIR</p>
<ul>
<li>Jarana Manotumruksa, Craig Macdonald, and Iadh Ounis. 2018. A Contextual Attention Recurrent Architecture for Context-Aware Venue Recommendation. In <em>Proceedings SIGIR ’18</em>. 555–564.</li>
<li>Jingyuan Chen, Hanwang Zhang, Xiangnan He, Liqiang Nie, Wei Liu, and TatSeng Chua. 2017. Attentive collaborative fifiltering: Multimedia recommendation with item-and component-level attention. In <em>Proceedings SIGIR ’17</em>. 335–344.</li>
</ul>
</li>
<li><p>WWW</p>
<ul>
<li>Yi Tay, Luu Anh Tuan, and Siu Cheung Hui. 2018. Latent relational metric learning via memory-based attention for collaborative ranking. In <em>Proceedings WWW</em> <em>’18</em>. 729–739.</li>
<li>Ali Mamdouh Elkahky, Yang Song, and Xiaodong He. 2015. A multi-view deep learning approach for cross domain user modeling in recommendation systems. In <em>Proceedings WWW ’15</em>. 278–288.</li>
</ul>
</li>
</ol>
<p>对于可以复现的论文，本文选择了几个额外的baseline进行比较：</p>
<ol>
<li>TopPopular</li>
<li>ItemKNN</li>
<li>UserKNN</li>
<li>ItemKNN-CBF</li>
<li>ItemKNN-CFCBF</li>
<li>P^3^α</li>
<li>RP^3^β</li>
</ol>
<h5 id="Collaborative-Memory-Networks-CMN"><a href="#Collaborative-Memory-Networks-CMN" class="headerlink" title="Collaborative Memory Networks(CMN)"></a>Collaborative Memory Networks(CMN)</h5><p>当然在CMN原文中所有评价指标都比它的baseline要好，但是当我们复现并且与新的baseline比较时，发现CMN谁也比不过…….</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316140901008.png" alt="image-20200316140901008"></p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316140933687.png" alt="image-20200316140933687"></p>
<p>最有趣的是，最后一幅图，最垃圾的也是最不个性化的TopPopular算法居然在Epinions数据集上很大程度上比所有其他算法都要好，不过这可能跟数据集本身的特性有关。</p>
<h5 id="Metapath-based-Context-for-RECommendation-MCRec"><a href="#Metapath-based-Context-for-RECommendation-MCRec" class="headerlink" title="Metapath based Context for RECommendation(MCRec)"></a>Metapath based Context for RECommendation(MCRec)</h5><p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316141834353.png" alt="image-20200316141834353"></p>
<p>使用的数据集是MovieLens，MCRec也不行。</p>
<p>特别的有一点，通过看该论文的源代码发现原文的作者在测试集上进行测试时，每次epoch得到一个结果，然后对每个评价指标选择了epoch中最佳的结果，这样做显然是不适当的。</p>
<h5 id="Collaborative-Variational-Autoencoder-CVAE"><a href="#Collaborative-Variational-Autoencoder-CVAE" class="headerlink" title="Collaborative Variational Autoencoder(CVAE)"></a>Collaborative Variational Autoencoder(CVAE)</h5><p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316143614930.png" alt="image-20200316143614930"></p>
<p>使用的评价指标是不同列表长度（50到300）的Recall，使用的数据集是CiteULike-a，显然CVAE也8太行。但是在两个较长的列表长度（超过100）时，CVAE能够在两个数据集上优于我们这些baseline。</p>
<h5 id="Collaborative-Deep-Learning-CDL"><a href="#Collaborative-Deep-Learning-CDL" class="headerlink" title="Collaborative Deep Learning(CDL)"></a>Collaborative Deep Learning(CDL)</h5><p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316144520757.png" alt="image-20200316144520757"></p>
<p>使用的数据集是CiteULike-a，baseline也都优于CDL。比较CVAE和CDL的结果，发现确实CVAE的结果确实比CDL好，这表明确实有提高，但是这两种方法都没有一种简单的baseline效果好。</p>
<h5 id="Neural-Collaborative-Filtering-NCF"><a href="#Neural-Collaborative-Filtering-NCF" class="headerlink" title="Neural Collaborative Filtering(NCF)"></a>Neural Collaborative Filtering(NCF)</h5><p>先上结果</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316145445718.png" alt="image-20200316145445718"></p>
<p>观察表格发现，在Pinterest数据集上，有两个baseline所有指标都优于NeuMF，但是在MovieLens数据集上，NeuMF很清楚是优于所有的baseline的。</p>
<p>该论文作者也是搞了一些小trick，从源代码看，作者是基于从测试集的结果来选择的epoch数，然而，这个超参数的调整不应该基于测试集来确定，应该用验证集来找到一个合适的参数。并且作者和ItemKNN作比较时，只是简单的取了不同邻居数，而没有测试其他变化。</p>
<h5 id="Spectral-Collaborative-Filtering-SpectralCF"><a href="#Spectral-Collaborative-Filtering-SpectralCF" class="headerlink" title="Spectral Collaborative Filtering(SpectralCF)"></a>Spectral Collaborative Filtering(SpectralCF)</h5><p>作者提供了MovieLens数据集的训练集和测试集，但是其他两个数据集（HetRec，AmazonInstant Video）却没有给，所以我们就根据论文中的描述自行创建了一个分割。</p>
<p>其次作者在文章只提供了一组超参数，显然应该所以的数据集都是用的这一组超参数，于是我们用提供的超参数和自己设定的超参数跑了代码。</p>
<p>在HetRec数据集和Amazon数据集上进行比较时，包括TopPoular在内的所有baseline在所有的指标上都比SpectralCF要好。但是用作者提供的Movie Lens分割时（该数据集作者提供了训练集和测试集），SpectralCF却比所有的baseline都要好的多。</p>
<p>这个结果不禁让我们思考是不是跟数据集的分割方法有很大关系？</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316150926703.png" alt="image-20200316150926703"></p>
<p>上图是采用自己的训练集测试集分割方法时在数据集MovieLens1M上的结果，结果却发现如上图，SpectralCF甚至被TopPopular超过。</p>
<p>所以这里面数据分割是一个很大的问题。</p>
<h5 id="Variational-Autoencoders-for-Collaborative-Filtering-Mult-VAE"><a href="#Variational-Autoencoders-for-Collaborative-Filtering-Mult-VAE" class="headerlink" title="Variational Autoencoders for  Collaborative Filtering(Mult-VAE)"></a>Variational Autoencoders for  Collaborative Filtering(Mult-VAE)</h5><p>该模型是在我们所调研的文献中唯一一个复杂的模型表现更好的一个例子，在各种配置下该模型都极大的优于我们提出的任何一个baseline。</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316154514502.png" alt="image-20200316154514502"></p>
<p>上图用到的数据集是Netflix data。</p>
<p>但是该神经方法只是部分的，取决于所选择的评估方法，当我们用其他的评价指标时发现：</p>
<p><img src="C:\Users\perso\AppData\Roaming\Typora\typora-user-images\image-20200316154835318.png" alt="image-20200316154835318"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yy-oops.github.io/2020/03/16/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="YY">
      <meta itemprop="description" content="努力充实自己">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YY's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-16 18:32:09" itemprop="dateCreated datePublished" datetime="2020-03-16T18:32:09+08:00">2020-03-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">YY</p>
  <div class="site-description" itemprop="description">努力充实自己</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">YY</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.7.2
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
